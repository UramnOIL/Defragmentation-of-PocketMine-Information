# API4 Changelogs全訳
## 訳に関して
<https://github.com/pmmp/PocketMine-MP/commit/9e6d7405709560c0025e072324602983213276dd> 版より翻訳
翻訳漏れの内容に気を配りますが、書かれていない項目がある場合PRを送ってもらえると助かります。

## 4.0.0-BETA1
2021.9.7リリース
このメジャーバージョンAPI4は重要なAPIの変更,新しいワールド形式のサポート,パフォーマンスの向上やネットワークの刷新を含めたコア全体の重要な変更に焦点を当てています。

これはベータリリースであり、最終版でないことを注意してください。 現在からリリースまでに重大な変更はない予定ですがAPIはまだ変更される可能性があります。

さらに、このチェンジログはベストエフォートに基づいて提供されていて、すべての変更点が言及されていない可能性があることに注意してください。何か洩れがあった場合追加するためにプルリクエストをお願いします。(すなわち pmmp公式へ)

### 警告
これは安定版リリースでは**ありません**。PMMPはこのビルドを使用したことによる損害のいかなる責任を負いません。
**テスト**目的にのみ使用してください。

### コア
#### 一般 General
- "プラグイングレーリスト"機能が導入されます。ローディング時からプラグインをホワイトリスト化もしくはブラックリスト化することができます。
- Remote Console (RCON) は削除されました。[RconServer](https://github.com/pmmp/RconServer)プラグインが代わりに提供されます。
- スポーンプロテクションは削除されました。[BasicSpawnProtection](https://github.com/pmmp/BasicSpawnProtection)プラグインが代わりに提供されます。
- Ctrl+Cシグナルハンドリングは削除されました。[PcnltSignalHandler]プラグインが代わりに提供されます。
- プレイヤー移動アンチチートは削除されました。
- GS4 QueryはRakLibが無効化されても停止されなくなりました。
- `pocketmine_chunkutils` PHP拡張は使われなくなりました。
- 新しいPHP拡張がこのバージョンから必要になりました。
    - [chunkutils2](https://github.com/pmmp/ext-chunkutils2)
    - [morton](https://github.com/pmmp/ext-morton)
- プレイヤーリスポーン時の多くのバグが修正されました。
    - 生成されていない地形でリスポーンする際に岩盤下にスポーンするバグ
    - 非常に遅いマシン上で初回サーバー参加時に岩盤下にスポーンするバグ
    - カスタムスポーン地点がセットされている状態でリスポーンしたときにブロック内(または上空)にスポーンするバグ
    - プレイヤースポーン地点がワールドスポーンが変わった時に以前の場所になってしまうバグ
- 高い維持コストのわりに恩恵が少ないためプリプロセッサーはビルドから削除されました。現在、プリプロセッサー利用は非推奨です。

#### コマンド Commands
- `/reload` コマンドは削除されました。
- `/effect` コマンドは数字IDをサポートしなくなりました。現在では名前が要求されます。
- `/enchant` コマンドは数学IDをサポートしなくなりました。現在では名前が要求されます。
- `/clear` コマンドが追加されました。バニラのMinecraftのものと機能的に同等のものです。
- 以下のコマンドの出力は選択した言語にローカライズされました。
    - `/gc`
    - `/status`
    - `/op`
    - `/deop`

#### 設定 Configuration
- ワールドのプリセットは`pocketmine.yml`の`preset`キーとして利用できるようになりました: 以前は`generator`キー
- 新たに以下のオプションが`pocketmine.yml`に追加されます
    - `chunk-ticking.blocks-per-subchunk-per-tick`(デフォルト `3`):この値を増加させるとランダムブロックアップデートの確率が上がります。(例. 草の成長)
    - `network.enable-encryption`(デフォルト`true`): Minecraftネットワークパケットを暗号化するか否かを決定できます。
- 以下のオプションが`pocketmine.yml`から削除されました。
    - `chunk-ticking.light-updates`: 光処理は基本的なバニラの機能を動作させるのに必要なため、チャンクチックを無効化することなくこの機能を停止することは意味がありません。もし、明るさ計算をしたくなければチャンクチックと共に無効化するようにしてください。
    - `player.anti-cheat.allow-movement-cheats`

#### ワールドハンドリング
##### インターフェイス
- 最初のワールド生成時にスポーン地形チャンク生成の進度が表示されるようになりました。

##### 機能
- 1.12.xまでのMinecraft Bedrockのワールドがサポートされました。(1.13より上はまた別の形式変更によりまだ**サポートされていません**。対応には非常に労力を要します。)
- 非推奨のワールド形式の自動変換が実装されました。
- `leveldb`以外のすべての形式は非推奨となりました。以下のワールド形式は**ロード時に自動的に新しい形式に変換されます**:
  - `mcregion`
  - `anvil`
  - `pmanvil`
- 建築上限256はすべてのワールドでサポートされます。(自動変換により)
- 追加ブロックがサポートされます。(自動変換により)
- 光処理はディスク上に保存・ロードされなくなりました。
- かわりに必要に応じてすぐに算出されます。これは以前からあった多くのバグを修正します。

##### パフォーマンス
- `leveldb`は現在、基本のサポートされたワールド形式です。優れた設計により生来よりリージョンベース形式よりも高速です。
- 部分的なチャンク保存(変更されたチャンクの子要素のみを保存する)が実装されました。これによりチャンク保存時に書き込む必要のあるデータ量を徹底的に減らすことができます。また、同様に**ワールド保存にかかる時間も徹底的に減らします**。 これは`leveldb`ワールド形式のモジュール設計に可能になりました。リージョンベース形式ではこの強化はできません。
- 光処理はすべてのチャンクで利用可能であるとは限らなくなります。必要に応じてすぐに算出されます。
- `/op`, `/deop`, `/whitelist add` and `/whitelist remove` は理由なくプレイヤーデータを読み込まないようになりました。
- `Timings`はより正確なパフォーマンスメトリクスを収集するため`hrtime()`により提供される高精度なタイマーを使うようになります。
- Z階数曲線(モートンコード)がブロックとチャンク座標のハッシュのために使用されます。